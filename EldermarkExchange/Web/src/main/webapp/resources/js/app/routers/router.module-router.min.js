ExchangeApp.routers.ModuleRouter=function(){function e(e){$.bbq.pushState(e)}function n(e){return $.bbq.getState(e)}function a(e,n,a){i.invoke({module:{name:s[e.template],fragment:{url:e}},initParents:n,forceReload:a}),ExchangeApp.managers.EventManager.publish("page_changed",{url:e,module:s[e.template],previousUrl:o}),o=t,t=e.template}var t,o,i=ExchangeApp.managers.ModuleManager,r=ExchangeApp.utils.module,s={"patient-info/{residentId}":"PatientInfo","patient-info/{residentId}/aggregated":"PatientInfo","patient-search":"PatientSearch","profile/show":"Profile","secure-messaging":"SecureMessaging","secure-messaging/config-warning":"SecureMessagingConfigWarning","secure-messaging/compose":"SecureMessagingComposeMsg","secure-messaging/setup":"SecureMessagingSetup","patient-info/{residentId}/compose":"SecureMessagingComposeMsg","secure-messaging/{messageId}/reply-to":"SecureMessagingComposeMsg","care-coordination":"CareCoordination","care-coordination/patients":"CareCoordinationPatients","care-coordination/contacts":"CareCoordinationContacts","care-coordination/events-log":"CareCoordinationEventsLog","care-coordination/templates/communities":"CareCoordinationCommunities","care-coordination/templates/organizations":"CareCoordinationOrganizations","care-coordination/service-plans":"CareCoordinationPatientServicePlans",administration:"Administration","administration/manual-matching":"AdministrationManualMatching","administration/suggested-matches":"AdministrationSuggestedMatches",reports:"Reports",header:"Header",footer:"Footer"};return $(window).on("hashchange",function(){var e=n("url");e&&a(e,!1)}),$(document).on("ready",function(){var t=n("url");t?a(t,!0):e({url:r.getUrl(ExchangeApp.info.startPage,null,ExchangeApp.info.params)})}),{route:function(n){i||this.setManager(),e({url:n})},back:function(){history.back()},reload:function(e){!function(e){e||(e=n("url")),e&&a(e,!1,!0)}(e)},setManager:function(){i=ExchangeApp.managers.ModuleManager},getUrlTemplate:function(){var e=n("url");return e?e.template:null}}}();