function ServicePlanListPanel(){Widget.apply(this,arguments)}ServicePlanListPanel.prototype=Object.create(Widget.prototype),ServicePlanListPanel.prototype.constructor=ServicePlanListPanel,ServicePlanListPanel.prototype.getDefaultProps=function(){return{onSavePlanSuccess:function(){},onSavePlanFailure:function(){}}},ServicePlanListPanel.prototype.componentDidMount=function(){this.$element=$('[cmp-id="'+this.$$id+'"]');var e=this;this.searchPanel=new SearchPanel({container:this.$element,onSearch:function(n){n.preventDefault(),e.list.reload()}}),this.searchPanel.mount(),this.list=new ServicePlanList({container:this.$element,patientId:this.props.patientId,getExtraAjaxData:function(){return e.searchPanel.getData()},onSelect:function(n){e.onViewPlan(n)},onDownload:function(n){e.onDownloadPlan(n)},onEdit:function(n){e.onEditPlan(n)}}),this.list.mount()},ServicePlanListPanel.prototype.componentDidUpdate=function(e,n){this.list.isEmpty()&&this.list.reload()},ServicePlanListPanel.prototype.onAddPlan=function(){var e=this.props.patientId,n=ExchangeApp.routers.ModuleRouter;n.route({template:"care-coordination/patients/"+e+"/create-service-plan"});var t=this;this.modal=new ServicePlanModal({container:$("body"),isOpen:!0,patientId:e,onSavePlanSuccess:function(){t.onSavePlanSuccess()},onSavePlanFailure:function(){t.onSavePlanFailure()},onHidden:function(){n.back()}}),this.modal.mount()},ServicePlanListPanel.prototype.onEditPlan=function(e){var n=this.props.patientId,t=ExchangeApp.routers.ModuleRouter;t.route({template:"care-coordination/patients/"+n+"/edit-service-plan"});var a=this;this.modal=new ServicePlanModal({container:$("body"),isOpen:!0,planId:e.id,patientId:n,onLeavePlanUnchanged:function(){a.onLeavePlanUnchanged()},onSavePlanSuccess:function(){a.onSavePlanSuccess()},onSavePlanFailure:function(){a.onSavePlanFailure()},onHidden:function(){t.back()},onLoadPlanFailure:function(){setTimeout(function(){bootbox.alert("The service plan has not been opened. Please try again later.",function(){a.modal.hide()})},300)}}),this.modal.mount()},ServicePlanListPanel.prototype.onViewPlan=function(e){var n=this.props.patientId,t=ExchangeApp.routers.ModuleRouter;t.route({template:"care-coordination/patients/"+n+"/view-service-plan"});var a=this;this.modal=new ServicePlanModal({container:$("body"),isOpen:!0,isReadonlyPlan:!0,planId:e.id,planDateModified:e.dateModified,isArchivedPlan:e.isArchived,patientId:n,hasScrollableBody:e.isArchived,onHidden:function(){t.back()},onLoadPlanFailure:function(){setTimeout(function(){bootbox.alert("The service plan has not been opened. Please try again later.",function(){a.modal.hide()})},300)},onViewArchivedPlan:function(e){a.onViewPlan($.extend({},e,{isArchived:!0}))}}),this.modal.mount()},ServicePlanListPanel.prototype.onDownloadPlan=function(e){var n=ExchangeApp.info.context,t=e.id,a=n+"/care-coordination/patients/patient/"+this.props.patientId+"/service-plans/"+t+"/pdf";a=a+"?timeZoneOffset="+(new Date).getTimezoneOffset(),$.fileDownload(a,{failCallback:function(){bootbox.alert("The service plan has not been downloaded. Please try again later.")}})},ServicePlanListPanel.prototype.onLeavePlanUnchanged=function(){this.modal.hide()},ServicePlanListPanel.prototype.onSavePlanSuccess=function(){var e=this;e.modal.hide(),bootbox.alert("The updates have been saved",function(){e.props.onSavePlanSuccess(),e.list.reload()})},ServicePlanListPanel.prototype.onSavePlanFailure=function(){this.modal.hide(),bootbox.alert("The updates have not been saved. Please check the form and try again later."),this.props.onSavePlanFailure()},ServicePlanListPanel.prototype.render=function(){return{"<>":"div",class:"service-plans",html:[{"<>":"div",class:"row",html:[]}]}};