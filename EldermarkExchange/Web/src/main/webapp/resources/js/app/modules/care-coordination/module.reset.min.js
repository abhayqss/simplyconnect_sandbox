$(document).on("ready",function(){function e(e,r){if(!e.valid())return!1;$.ajax({url:"validatePasswordComplexityReset",type:"POST",data:e.serialize()}).success(function(o){1==o?$.ajax({url:"validatePasswordHistoryReset",type:"POST",data:e.serialize()}).success(function(o){1==o?$.ajax({type:"POST",url:"reset",data:e.serialize()}).success(function(){r.empty(),r.append("Password has been set. "),r.append("Now you can login to "),r.append($("#careCoordinationUrl")),r.append(". Use your email as Login and '"),r.append($("#organizationCode").val()),r.append("' as Company ID."),e.find(".boxBody").hide(),e.find(".btn").hide(),r.removeClass("hidden")}).error(function(){r.html("Error !"),r.removeClass("hidden")}):$("#loginError").text("In order to secure your account, please create a unique password you have not used before")}).fail(function(e){$("#loginError").text("Internal server error")}):$("#loginError").text("Password does not meet the password requirements (see below)")}).fail(function(e){$("#loginError").text("Internal server error")})}$("#resetPasswordForm").validate(new ExchangeApp.utils.wgt.Validation({rules:{password:{required:!0},confirmPassword:{required:!0,equalTo:"#password"}},messages:{password:{required:getErrorMessage("field.empty")},confirmPassword:{required:getErrorMessage("field.empty")}}})),function(){var r=$("#resetPasswordForm"),o=r.find(".alert");$("#declineResetBtn").on("click",function(){return $.ajax({type:"DELETE",url:"reset/"+$("#resetPasswordForm").find('[name="token"]').val()}).success(function(){return window.location.href="../login",!1}).error(function(){o.html("Error !"),o.removeClass("hidden")}),!1}),$("#acceptResetBtn").on("click",function(){return e(r,o),!1}),$("#resetPasswordForm input").on("keydown",function(n){if(13===n.keyCode)return e(r,o),n.preventDefault(),!1})}()});