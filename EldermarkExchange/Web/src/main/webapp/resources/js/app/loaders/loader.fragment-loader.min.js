ExchangeApp.loaders.FragmentLoader=function(){function n(n,e,r){var t=n+"LinksLoaded",i=n+"ScriptsLoaded",a=n+"ResourcesLoaded";$(window).off(t+" "+i+" "+a),function(n,e){var r=$(e).find("link");if(r.size()){var t={};r.each(function(n,e){var r=$(e).attr("href");if(!$("head").find('link[href*="'+r+'"]').length){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=r,i.onload=function(){t[r]=!0},$("head")[0].appendChild(i),t[r]=!1}});var i=setInterval(function(){var e=!0;for(var r in t)e=e&&t[r];e&&(clearInterval(i),$(window).trigger(n+"LinksLoaded"))},100)}else setTimeout(function(){$(window).trigger(n+"LinksLoaded")})}(n,e),function(n,e){var r=$(e).find("script");if(r.size()){var t={};r.each(function(n,e){var r=$(e).attr("src");if(r){if(!$("head").find('script[src*="'+r+'"]').length){var i=document.createElement("script");i.src=r,i.async=!1,i.onload=function(){t[r]=!0},i.onerror=function(n){n.status=401,ExchangeApp.utils.module.onAjaxError(n)};var a=$(e).data();for(var o in a)i.dataset[o]=a[o];$("head")[0].appendChild(i),t[r]=!1}}});var i=setInterval(function(){var e=!0;for(var r in t)e=e&&t[r];e&&(clearInterval(i),$(window).trigger(n+"ScriptsLoaded"))},100)}else setTimeout(function(){$(window).trigger(n+"ScriptsLoaded")})}(n,e);var o={links:!1,scripts:!1};$(window).on(t+" "+i,function(n){n.type==t&&(o.links=!0),n.type==i&&(o.scripts=!0),o.links&&o.scripts&&$(window).trigger(a)}),$(window).on(a,function(n){r&&r(n)})}var e=ExchangeApp.utils.module;return{_module:"",load:function(r){var t=this;$.ajax({type:"GET",headers:{"X-Content-Compressing":"enabled"},url:e.stringifyUrl(r.url),success:function(e){n(t._module,e,r.callbacks.onResourcesLoaded),r.callbacks.onFragmentLoaded(e)},error:function(n){ExchangeApp.utils.module.onAjaxError(n)}})},init:function(n){return this._module=n,e.clone(this)}}}();