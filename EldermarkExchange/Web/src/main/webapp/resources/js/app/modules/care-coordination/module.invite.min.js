$(document).on("ready",function(){function e(e,n){return!!e.valid()&&($.ajax({url:"validatePasswordComplexityInvite",type:"POST",data:e.serialize()}).success(function(i){1==i?$.ajax({url:"validatePasswordHistoryInvite",type:"POST",data:e.serialize()}).success(function(i){1==i?$.ajax({type:"POST",url:"invite",data:e.serialize()}).success(function(){n.empty(),n.append("Now you can login to "),n.append($("#careCoordinationUrl")),n.append(". Use your email as Login and '"),n.append($("#organizationCode").val()),n.append("' as Company ID."),e.find(".boxBody").hide(),e.find(".btn").hide(),n.removeClass("hidden")}).error(function(){n.html("Error !"),n.removeClass("hidden")}):$("#loginError").text("In order to secure your account, please create a unique password you have not used before")}).fail(function(e){$("#loginError").text("Internal server error")}):$("#loginError").text("Password does not meet the password requirements (see below)")}).fail(function(e){$("#loginError").text("Internal server error")}),!1)}function n(){var n=$("#resetPasswordForm"),i=n.find(".alert");$("#declineInvitationBtn").on("click",function(){return $.ajax({type:"DELETE",url:"invite/"+$("#resetPasswordForm").find('[name="token"]').val()}).success(function(){n.find(".boxBody").hide(),n.find("#acceptInvitationBtn").hide(),n.find("#declineInvitationBtn").text("BACK TO LOGIN"),$("#declineInvitationBtn").off("click").on("click",function(){return window.location.href="../login",!1}),i.html("Invitation was declined."),i.removeClass("hidden")}).error(function(){i.html("Error !"),i.removeClass("hidden")}),!1}),$("#acceptInvitationBtn").on("click",function(){e(n,i)}),$("#sendNewInvitationBtn").on("click",function(){!function(e){if(!e.valid())return!1;$.ajax({url:"sendNewInvitation",type:"POST",data:e.serialize()}).success(function(n){e.find("#sendNewInvitationBtn").hide(),e.find("#message").text("A new invitation link has been sent to your email address.")}).error(function(n){e.find("#message").text("There was an error while sending new invitation!"),e.find("#message").css("color","red")})}(n)}),$("#resetPasswordForm input").on("keydown",function(r){if(13===r.keyCode)return e(n,i),r.preventDefault(),!1})}$("#resetPasswordForm").validate(new ExchangeApp.utils.wgt.Validation({rules:{password:{required:!0},confirmPassword:{required:!0,equalTo:"#password"}},password:{password:{required:getErrorMessage("field.empty")},confirmPassword:{required:getErrorMessage("field.empty")}}})),n()});