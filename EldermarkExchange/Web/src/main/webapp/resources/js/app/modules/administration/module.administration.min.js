ExchangeApp.modules.Administration=function(){function t(){a().random=l.rand(),function(t,n){var e=a(),r=t||e.$html,i=n||e.random;r=l.randomize(r,i,!1)}(),function(t,n){var e=a();e.ajaxMap||(e.ajaxMap={});var i=t||e.$html,o=n||e.random,d=l.findAjaxUrls(i,o);$.each(d,function(t,a){e.ajaxMap[r(a,{params:!0})]=a}),l.find(i,o,'[data-ajax-load="true"]').on("click",function(){$(this).parent("li").parent("ul").children("li").each(function(){$(this).removeClass("active")}),$(this).parent("li").addClass("active");var t=$(this).attr("data-ajax-url-tmpl"),a=$(this).attr("data-ajax-url-vars"),n=$(this).attr("data-ajax-url-params"),e=($(this).attr("data-target"),l.getUrl(t,a,n));return s.route(e),!1}),l.find(i,o,'[data-ajax-anchor="true"]').on("click",function(){var t=$($(this).attr("href"));return t.length&&$("html, body").animate({scrollTop:t.offset().top},200),!1})}()}function a(){return i[r(o,{params:!0})]}function n(){return $(document.getElementById(e()))}function e(){return r(o,{params:!0}).replace(/[/&\?=]/g,"_")}function r(t,a){return l.stringifyUrl(t,a)}var i={},o={template:"administration"},d={reloadNeeded:!1},s=ExchangeApp.routers.ModuleRouter,l=ExchangeApp.utils.module,c=ExchangeApp.loaders.FragmentLoader.init("administration");return{init:function(n){o=n,this.renderHolder(),this.loadFragment({onFragmentLoaded:function(){t()},onResourcesLoaded:function(){var t=a();t.widgets={},this.setEvents(),t.inited=!0,this.render(),this.loaded()}})},loaded:function(){$.each($(".baseHeader a.ldr-head-lnk.active"),function(){$(this).removeClass("active"),$(this).removeClass("bottom")}),$(".baseHeader a.ldr-head-lnk.administrationLnk").addClass("active bottom")},update:function(t){t&&(o=t),this.loaded()},getFragment:function(t){return i[r(t,{params:!0})]},isFragmentInited:function(t){var a=this.getFragment(t);return a&&a.inited},loadFragment:function(t){var a=this;c.load({url:o,callbacks:{onFragmentLoaded:function(n){d.reloadNeeded=!1;var e=$(n).find("#content .markup-frg"),s=r(o,{params:!0});i[s]={$html:e,url:l.clone(o)},t.onFragmentLoaded.apply(a)},onResourcesLoaded:function(){t.onResourcesLoaded.apply(a)}}})},render:function(){var t=a().$html;n().empty(),n().append(t)},renderHolder:function(){if(!document.getElementById(e())){var t=$("<div/>");t.attr("id",e()),t.hide(),$("#content").append(t)}},hide:function(){n().hide(),$("#content").addClass("loading")},show:function(){0==$("#content > div:visible").length&&n().show(),$("#content").removeClass("loading")},setEvents:function(){return!1},reloadNeeded:function(){return d.reloadNeeded}}}();