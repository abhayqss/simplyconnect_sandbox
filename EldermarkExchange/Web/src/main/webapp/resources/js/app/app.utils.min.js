$.isNumeric(),ExchangeApp.utils.common=($,{getProperty:function(e,t){for(var a=(t=((t=t.replace(/^\./,""))+"").replace(/\[(\w+)\]/g,".$1")).split("."),r=0,n=a.length;r<n;++r){var i=a[r];if(!(i in e))return;e=e[i]}return e}}),ExchangeApp.utils.auth=function(e){return{getToken:function(){return e("meta[name='_csrf']").attr("content")}}}($),ExchangeApp.utils.module={clone:function(e){return $.extend(!0,{},e)},rand:function(){return 1e19*Math.random()},randomize:function(e,t,a){if(!t)return!1;var r=a?e.clone():e;return r&&r.length&&(r.find("[id]").each(function(e,a){var n=$(a).attr("id");n&&(n.indexOf(t)<0&&$(a).attr("id",n+t),r.find('[href="#'+n+'"]').each(function(e,a){var r=$(a).attr("href");r.indexOf(t)<0&&$(a).attr("href",r+t)}))}),r.find("[data-target]").each(function(e,a){var r=$(a).attr("data-target");r&&r.indexOf(t)<0&&$(a).attr("data-target",r+t)})),r},find:function(e,t,a){if("string"==typeof a){var r=a.match(/#[\w\\.]+/g)||[];$.each(r,function(e,r){a=a.replace(r,r+t)})}return e.find(a)},stringifyUrl:function(e,t){var a=e.template;if((!t||!t.variables)&&e.variables)for(var r in e.variables)a=e.template.replace("{"+r+"}",e.variables[r]);if((!t||!t.params)&&e.params){var n="?";for(var r in e.params)a+=n+r+"="+e.params[r],n="&"}return a},getUrl:function(e,t,a){var r={};return r.template=e,t&&(r.variables={},$.each(t.split("&"),function(e,t){var a=t.split("=");r.variables[a[0]]=a[1]})),a&&(r.params={},$.each(a.split("&"),function(e,t){var a=t.split("=");r.params[a[0]]=a[1]})),r},csrf:function(e){var t=$("meta[name='_csrf']").attr("content"),a=$("meta[name='_csrf_header']").attr("content");e.setRequestHeader(a,t)},noneOptionHandler:function(e,t,a,r){var n=e.currentTarget[t],i=e.currentTarget[e.currentTarget.options.length-1];a&&(n&&n.label.toLowerCase().startsWith("none")&&"-1"===n.value?($(this).selectpicker("deselectAll"),$(n).prop("selected",!0),$(this).selectpicker("refresh")):i&&i.label.toLowerCase().startsWith("none")&&$(i).prop("selected")&&"-1"===i.value&&($(i).prop("selected",!1),$(this).selectpicker("refresh"))),$.each($(this),function(e,t){$.each(t,function(e,t){-1!=$(t).val()&&"none"===$(t).text().toLowerCase()&&$(t).parent().prev().find("ul").children().eq(e).css("display","none")})})},allOptionHandler:function(e,t,a,r){var n=e.currentTarget[t],i=e.currentTarget[0],o=e.currentTarget[1];a&&(!n||"all"!==n.label.toLowerCase()&&"0"!==n.value?(i&&("all"===i.label.toLowerCase()||"0"===i.value)&&$(i).prop("selected")&&($(i).prop("selected",!1),$(this).selectpicker("refresh")),o&&("all"===o.label.toLowerCase()||"0"===o.value)&&$(o).prop("selected")&&($(o).prop("selected",!1),$(this).selectpicker("refresh"))):($(this).selectpicker("deselectAll"),$(n).prop("selected",!0),$(this).selectpicker("refresh"))),$.each($(this),function(e,t){$.each(t,function(e,t){-1!=$(t).val()&&"none"===$(t).text().toLowerCase()&&$(t).parent().prev().find("ul").children().eq(e).css("display","none")})})},findAjaxUrls:function(e,t){var a=[],r=this;return r.find(e,t,'[data-ajax-load="true"]').each(function(){var e=$(this).attr("data-ajax-url-tmpl"),t=$(this).attr("data-ajax-url-vars"),n=$(this).attr("data-ajax-url-params");if(e){var i=r.getUrl(e,t,n);a.push(i)}}),a},onAjaxError:function(e,t){var a={401:function(){var e=location.pathname.match(/\/\w+/),t=e?e[0]:"";window.location.href=t+"/login?invalid-session=true"},422:function(){var e=ExchangeApp.routers.ModuleRouter,t=ExchangeApp.utils.module.getUrl("patient-search",null,"hashKey=error");e.route(t)},403:function(){var e=location.pathname.match(/\/\w+/),t=e?e[0]:"";window.location.href=t+"/login?invalid-session=true"}};a[e.status]?a[e.status]():t&&t(e)},showLoader:function(){$(".loader").show()},hideLoader:function(){$(".loader").hide()},initAjaxLoader:function(e,t){var a=$('<div style="z-index: 9999" class="modal-ajax-loader">'),r=t&&t.loaderWillBeShown,n=t&&t.loaderShown,i=t&&t.loaderWillBeHidden,o=t&&t.loaderHidden;return{show:function(){r&&r(),e.prepend(a),n&&n()},hide:function(){i&&i(),a.remove(),o&&o()},setLoaderHiddenCallback:function(e){o=e}}}},ExchangeApp.utils.wgt=function(){function e(e,t,a){var r=a.match(/#[\w\\.]+/g)||[];return $.each(r,function(e,r){a=a.replace(r,r+t)}),e.find(a)}function t(e){if(!e)return"";return e>1048576?(e/1048576).toFixed(2)+" MB":e>1024?(e/1024).toFixed(2)+" KB":e+" B"}return{grid:function(a,r,n){var i=n.tableId,o=e(a,r,"#"+i),l=e(a,r,"#"+i+"_paginate");if(o.length){var s=[],c=o.attr("data-col-ids").split(","),d=o.attr("data-col-formats").split(","),u=[],p=[],f=[],h=[];$.each(c,function(e,a){var r=$.trim(d[e]),i=$.trim(a),o={mDataProp:i,sName:i};switch(o.mRender=function(e){return function(e,t,a){var r="";if(e&&e.length>t){var n=e.split("\n");return $.each(n,function(e,n){var i=n.split(" ");$.each(i,function(e,n){if(n.length>t){for(var i="",o=new RegExp(".{1,"+a+"}","g"),l=n.match(o),s=0;s<l.length;s++)i+=l[s]+"<wbr>";r+=r.length?" "+i:i}else r+=r.length?" "+n:n}),r+="\n"}),r.length?r.slice(0,-1):e}return e}(e,15,10)},r){case"fake":p.push(i),f.push({orderable:!1,aTargets:[e],sName:i});break;case"ssn":o.mRender=function(e){return e?e.substring(0,3)+"-"+e.substring(3,5)+"-"+e.substring(5,9):""};break;case"checkbox":o.mRender=function(e,t,a){return"display"===t?'<input type="checkbox" class="editor-active">':e},o.className="checkbox-col",o.sWidth="10px",u.push(i),f.push({orderable:!1,aTargets:[e],sName:i});break;case"filesize":o.mRender=t;break;case"date":o.mRender=function(e){if(e){var t=new Date(e);return(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"/"+t.getFullYear()}return""};break;case"localDateTime":o.mRender=function(e){if(e){var t="MM/DD/YYYY hh:mm A Z";t=t.replace("Z","").replace("z","");var a=e;a instanceof Date||(a=new Date(a));var r=a.toTimeString(),n=r.match(/\([a-z ]+\)/i);"MST"==(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=r.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n="MSK");return moment(e).format(t)+" "+n+" "+moment(e).format("Z")}return""};break;case"localDate":o.mRender=function(e){if(e){return moment(e).format("MM/DD/YYYY")}return""};break;case"custom":o.mRender=n.colSettings[i].customRender}if(n.colSettings&&i in n.colSettings){$.extend(o,n.colSettings[i]);var l=n.colSettings[i].order;l&&h.push([e,l])}s.push(o)});var v=n.totalDisplayRows?n.totalDisplayRows:7,g=void 0===n.sort||n.sort,m=void 0===n.paginate||n.paginate;$.fn.DataTable.ext.pager.numbers_length=n.numbersLength?n.numbersLength:5;var b=location.pathname.match(/\/\w+/),w=b?b[0]:"",y={sAjaxSource:o.attr("data-url"),destroy:!0,sAjaxDataProp:"content",aoColumns:s,aoColumnDefs:f,iDisplayLength:v,iDisplayStart:0,bServerSide:!0,bProcessing:!0,sort:g,paginate:m,order:n.order?n.order:[],language:{paginate:{next:"<div/>",previous:"<div/>"},sZeroRecords:"No results found.",sProcessing:"<img src='"+w+"/resources/images/ajax-loader.gif'>",sInfoEmpty:"",sInfoFiltered:"",sInfo:""},store:new ItemsStore,fnServerData:function(t,i,s){l.hide();for(var c={},d=0;d<i.length;d++)c[i[d].name]=i[d].value;var f=c.iDisplayLength,h=c.iDisplayStart,v=0===h?h:h/f,g=[c.iSortCol_0,c.iSortCol_1,c.iSortCol_2,c.iSortCol_3,c.iSortCol_4,c.iSortCol_5,c.iSortCol_6,c.iSortCol_7],m=[c.sSortDir_0,c.sSortDir_1,c.sSortDir_2,c.sSortDir_3,c.sSortDir_4,c.sSortDir_5,c.sSortDir_6,c.sSortDir_7],b=[c["mDataProp_"+g[0]],c["mDataProp_"+g[1]],c["mDataProp_"+g[2]],c["mDataProp_"+g[3]],c["mDataProp_"+g[4]],c["mDataProp_"+g[5]],c["mDataProp_"+g[6]],c["mDataProp_"+g[7]]],w=t;-1!==f&&(w+=w.indexOf("?")>-1?"&":"?",w+="page="+v+"&size="+f);for(var d=0,y=b.length;d<y;d+=1)b[d]&&(w+=w.indexOf("?")>-1?"&":"?",w+="sort="+b[d],m[d]&&(w+=","+m[d]));var S=o.attr("data-request-method");if(S||(S="POST"),n.fetchServerData)n.fetchServerData(w,S,s);else{var D={dataType:"json",type:S,url:w,beforeSend:function(e){var t=$("meta[name='_csrf']").attr("content"),a=$("meta[name='_csrf_header']").attr("content");e.setRequestHeader(a,t)},success:function(e){e.iTotalDisplayRecords=e.totalElements,$.each(e.content,function(e,t){$.each(u,function(e,a){t[a]=!1}),$.each(p,function(e,a){t[a]=!1})}),n.callbacks&&n.callbacks.successCallback&&n.callbacks.successCallback(e),s(e)},error:function(e){ExchangeApp.utils.module.onAjaxError(e,function(){e.iTotalDisplayRecords=0,e.content=[],n.callbacks&&n.callbacks.errorCallback&&n.callbacks.errorCallback(e),s(e)})}};o.find("tbody tr").remove();var k=e(a,r,"#"+n.searchFormId);k.length>0?k.valid()?(D.data=k.serialize(),$.ajax(D)):s({iTotalDisplayRecords:0,content:[]}):$.ajax(D)}}};$.extend(!0,y.language,n.language),$.extend(!0,y,n.scroll),$.extend(!0,y,n.callbacks),y.drawCallback=function(e){function t(e,t){t?y.store.addItem(e.id):y.store.removeItem(e.id)}function a(e,t){var a=e.find("input:checkbox");a&&(a.prop("checked",t),a.trigger("refresh"))}function r(e,t){e.toggleClass("selected",t)}function i(e,t,i){i?function(e,t){var i=$("<div/>");i.append($("<span>"+t+"</span>")),i.attr("id","chosed-row-"+e),i.addClass("chosed-row");var l=$("<button></button>"),s=$('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>');l.append(s),l.on("click",function(){y.store.removeItem(e),i.remove(),o.find("tbody tr").each(function(t,i){var l=$(i);o.dataTable().api().row(t).data().id===e&&(a(l.find("input:checkbox"),!1),"multiple"===n.selectable.type&&(r(l,!1),li))})}),i.append(l),$(".chose-rows-pnl").append(i)}(e,t):function(e){$(".chose-rows-pnl").find("#chosed-row-"+e).remove()}(e)}if(0==e.aoData.length?($(e.nTHead).hide(),$(e.nTFoot).hide(),l.hide()):($(e.nTHead).show(),$(e.nTFoot).show(),l.show()),n.selectable){o.find("input:checkbox").styler(),y.store.items.length>0&&o.find("tbody tr").each(function(e,t){var i=o.dataTable().api().row(e).data();if(i&&y.store.hasItem(i.id)){var l=$(t);"multiple"===n.selectable.type&&r(l,!0),a(l,!0)}});o.find("tbody").off("click").on("click","tr td",function(e){var r=o.dataTable().api(),l=$(e.currentTarget).parent(),s=r.row(l).index(),c=r.row(s).data();if(void 0!==c){if(l.toggleClass("selected"),"multiple"===n.selectable.type){var d=l.hasClass("selected");t(c,d),a(l,d),n.selectable.boxForStore&&i(c.id,c[n.selectable.boxForStore.dataColumn],d)}"single"===n.selectable.type&&l.siblings().each(function(e,t){$(t).removeClass("selected")}),n.selectable.callback&&n.selectable.callback.call(self,l,c,s)}}),n.selectable.ignoreRowClicks&&o.find("tbody").off("click"),o.find("tbody tr").off("change").on("change","input:checkbox",function(e){var a=o.dataTable().api(),l=$(e.target).closest("tr"),s=a.row(l).index(),c=a.row(s).data(),d=$(e.target).is(":checked");t(c,d),"multiple"===n.selectable.type&&r(l,d),n.selectable.boxForStore&&i(c,c[n.selectable.boxForStore.dataColumn],d),n.selectable.callback&&n.selectable.callback.call(self,l,c,s)})}n.callbacks&&n.callbacks.drawCallback&&n.callbacks.drawCallback.call(self,e)};var S=o.dataTable(y);return h.length&&S.api().order(h),S}},wizard:function(t,a,r){return e(t,a,"#"+r.wizardId).bootstrapWizard(r)[0]},alert:function(t,a,r){switch(r.action){case"add":var n=r.placeSelector?e(t,a,r.placeSelector):r.place,i=$("<div>");i.addClass("ldr-ui-layout alert alert-dismissible");var o=r.type?r.type:"alert-warning";if(i.addClass(o),r.closable){if(r.closable.btn){var l=$("<button><span>&times;</span></button>");l.addClass("close").attr("type","button"),l.on("click",function(){$(this).parent(".alert").remove()}),i.append(l)}r.closable.timer&&window.setTimeout(function(){r.closable.callback&&r.closable.callback.call(i[0]),i.remove()},r.closable.timer)}return r.alertId&&i.attr("id",r.alertId),i.append(r.message),n.find(".alert.alert-dismissible").remove(),"bottom"==r.poz?n.append(i):n.prepend(i),i;case"remove":$(r.alertSelector).remove()}},Validation:function(e){e.ignore=e.ignore||$.validator.defaults.ignore;var t=function(e,t){var a=$(e),r=a;if("radio"===a.attr("type")){var n=a.attr("name");r=$("[name="+n+"]").parents("label")}if("button"===a.attr("type")){var i=a.attr("data-id");r=a.siblings("#"+i)}"file"===a.attr("type")&&(r=a.siblings(".bootstrap-filestyle")),a.valid()&&(a.parents(".form-group").removeClass("has-warning"),r.tooltip("destroy"),r.removeAttr("data-validated"))};return $.fn.resetForm=function(){this.find(".form-group").removeClass("has-warning")},{ignore:e.ignore,rules:e.rules,messages:e.messages,focusInvalid:!e.scrollToFirstInvalid,invalidHandler:e.scrollToFirstInvalid?function(t,a){if(a.numberOfInvalids()){for(var r,n=0;n<a.errorList.length;n+=1){var i=$(a.errorList[n].element);if(i.is(":visible")){r=i;break}}r&&(e.container.scrollInProgress||(e.container.scrollInProgress=!0,e.container.scrollTo(r,e.scrollingDuration||500,function(){e.container.scrollInProgress=!1})))}}:void 0,showErrors:function(e,t){!function(e,t,a){for(var r in t){var n=$(e.currentForm).find("[name='"+r+"']"),i=t[r],o=n,l=n.attr("data-tooltip-position")||void 0;"radio"==n.attr("type")&&(o=$(e.currentForm).find("[name="+r+"]").parents("label")),"checkbox"==n.attr("type")&&(o=$(e.currentForm).find("[name="+r+"]").parents("label")),"file"==n.attr("type")&&(o=n.siblings(".bootstrap-filestyle"),l="top"),"subjective"==n.attr("id")&&(l="top"),o.parents(".form-group").addClass("has-warning"),o.attr("data-validated")||(o.attr("data-validated",!0),o.attr("data-toggle","tooltip"),o.attr("data-placement",l),o.attr("title",i),o.tooltip()),o.attr("data-original-title")!=i&&o.tooltip("hide").attr("data-original-title",i).tooltip("fixTitle").tooltip("show")}e.defaultShowErrors(),$('label[class="error"]').remove()}(this,e)},onfocusout:function(e,a){t(e)},onkeyup:function(e,a){t(e)},onchange:!1}},lifeSearch:function(t,a,r){var n=e(t,a,r.select),i=n.closest(".dropdown"),o=e(t,a,r.searchInput),l=e(i,a,".glyphicon-search"),s=e(i,a,".delete-text"),c=r.delay||500,d=function(){s.css({display:"none"}),l.css({display:""})},u=function(){i.addClass("open")},p=function(){i.removeClass("open")},f=function(e,t){n.find("option").remove().end().append('<option value="'+e+'">'+t+"</option>").val(e),n.trigger("change"),o.val(t),o.trigger("change")};i.on("show.bs.dropdown",function(e){if(""===$(e.relatedTarget).val()||null===$(e.relatedTarget).val()||void 0===$(e.relatedTarget).val())return!1}),i.on("hide.bs.dropdown",function(e){""!==n.val()&&null!==n.val()&&void 0!==n.val()||o.val("")}),i.click(function(e){e.stopPropagation(),e.preventDefault()}),$("body").click(function(){i.removeClass("open"),i.trigger("hide.bs.dropdown")});var h=(new Date).getTime();return o.on("keyup",function(){if(""===$(this).val()||null===$(this).val()||void 0===$(this).val())p(),d();else{var e=(new Date).getTime(),t=e-h>c;if(h=e,u(),s.css({display:""}),l.css({display:"none"}),n.val(""),n.trigger("change"),t&&void 0!==r.notEmptyKeyUpCallBack)var a=this,i=setInterval(function(){(new Date).getTime()-h>c&&(r.notEmptyKeyUpCallBack.call(this,$(a).val()),clearInterval(i))},100)}}),o.on("click",function(){""!==$(this).val()&&null!==$(this).val()&&void 0!==$(this).val()&&(u(),r.searchInputNotEmptyClickCallback&&r.searchInputNotEmptyClickCallback.call(this,$(this).val()))}),d(),s.on("click",function(){f("",""),p(),d()}),""!==n.val()&&null!==n.val()&&void 0!==n.val()&&o.val(n.find(":selected").text()),{open:function(){u()},close:function(){p()},setSelectValue:function(e,t){f(e,t)}}}}}(),$.validator.addMethod("regexp",function(e,t,a){return e=e.toString().replace(/^\s+/,"").replace(/\s+$/,""),a.test(e)},"This value doesn't match the acceptable pattern."),$.validator.addMethod("dateExp",function(e,t,a){if(!(e=e.toString().replace(/^\s+/,"").replace(/\s+$/,"")))return!0;var r=new Date(e);return!isNaN(r.getTime())&&a.test(e)},"This value doesn't match the acceptable pattern."),$.validator.addMethod("lengthGreaterThan",function(e,t,a){return e.length>a}),$.validator.addMethod("requiredIf",function(e,t,a){return!a.conditionFunction()||!(""===e)}),$.validator.addMethod("requiredIfNot",function(e,t,a){return!!a.conditionFunction()||!(""===e)}),$.validator.addMethod("lengthLessThan",function(e,t,a){return e.length<a}),$.validator.addMethod("lengthEqual",function(e,t,a){return!e||(!a||e.length==a)},"Field must have {0} digits"),$.validator.addMethod("ssn",function(e,t){return!e||(this.optional(t)||e.match(/^\d{3}-?\d{2}-?\d{4}$/))},"Please specify a valid SSN"),$.validator.addMethod("integer",function(e,t){return this.optional(t)||/^-?\d+$/.test(e)},"A positive or negative non-decimal number please"),$.validator.addMethod("positiveInteger",function(e,t){return this.optional(t)||/^\d+$/.test(e)},"A positive or negative non-decimal number please"),$.validator.addMethod("filesize",function(e,t,a){return this.optional(t)||t.files[0].size<=a}),$.validator.addMethod("phone",function(e,t){return this.optional(t)||e.match(/^\+?[0-9]{10,15}$/)},"A phone format is invalid: only digits allowed (no spaces or dashes), '+' may be leading symbol."),$.validator.addMethod("stateUS",function(e,t,a){var r,n=void 0===a,i=!n&&void 0!==a.caseSensitive&&a.caseSensitive,o=!n&&void 0!==a.includeTerritories&&a.includeTerritories,l=!n&&void 0!==a.includeMilitary&&a.includeMilitary;return r=o||l?o&&l?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":o?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",r=i?new RegExp(r):new RegExp(r,"i"),this.optional(t)||r.test(e)},"Please specify a valid state"),$.validator.addMethod("emails",function(e,t,a){return this.optional(t)||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gim.test(e)},"Please specify a valid Email"),$.validator.addMethod("password1",function(e,t){var a=new RegExp("^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,255}$");return this.optional(t)||a.test(e)},"Password must be at least 8 characters, contain at least 1 UPPERCASE, 1 lowercase, and one numeric digit "),$.validator.addMethod("fileIsPicture",function(e,t,a){return this.optional(t)||"image/jpeg"==t.files[0].type||"image/gif"==t.files[0].type||"image/png"==t.files[0].type}),$.validator.addMethod("notEqual",function(e,t,a){return this.optional(t)||e!=$(a).val()},"Please enter a different value"),$.validator.addMethod("fileRatio",function(e,t,a){a.min,a.max;if(this.optional(t))return!0;var r,n=this.previousValue(t);if(this.settings.messages[t.name]||(this.settings.messages[t.name]={}),n.originalMessage=this.settings.messages[t.name].fileRatio,this.settings.messages[t.name].fileRatio=n.message,n.old===e)return n.valid;n.old=e,r=this,this.startRequest(t),{}[t.name]=e;var i=new Image;return i.onload=function(){var i=this.width,o=this.height,l=i/o;console.log(i,o,l,a);var s=l>=a[0]&&l<=a[1];r.settings.messages[t.name].fileRatio=n.originalMessage,s?(submitted=r.formSubmitted,r.prepareElement(t),r.formSubmitted=submitted,r.successList.push(t),delete r.invalid[t.name],r.showErrors()):(errors={},message=r.defaultMessage(t,"fileRatio"),errors[t.name]=n.message=$.isFunction(message)?message(e):message,r.invalid[t.name]=!0,r.showErrors(errors)),n.valid=s,r.stopRequest(t,s)},i.src=window.URL.createObjectURL(t.files[0]),"pending"}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e});