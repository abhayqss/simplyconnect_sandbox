define(["underscore",path("../Utils")],function(t,e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=o(t,e);return{hours:Math.min(a,23),minutes:n?u(n):o(0,59),seconds:r?u(r):o(0,59)}}function r(t){return{year:Number(t.substring(0,4)),month:Number(t.substring(5,7))-1,day:Number(t.substring(8,10))}}function a(t){var e=r(t);return new Date(e.year,e.month,e.day)}function o(t,e){return Math.floor(Math.random()*(e-t+1))+t}function u(t){return t[o(0,t.length-1)]}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Z",u=function(t,e){var n=a(t),r=o(0,a(e)-n);return n.setTime(n.getTime()+r),{day:n.getDate(),month:n.getMonth(),year:n.getFullYear()}}(t,e),i=n(),s=new Date(u.year,u.month,u.day,i.hours,i.minutes,i.seconds);return m(s,h)+r}var s=e.Date,d=s.add,m=s.format,h=s.formats.isoDateTime;return{getRandomInt:o,genRandomArray:function(e,n){for(var r=[],a=n||e,u=0;u<e;u++)r.push({idx:u,rnd:o(0,9999)});r=t.sortBy(r,"rnd");var i=[];return t.each(r,function(t,e){e<a&&i.push(t.idx)}),i},getRandomArrayElement:u,getRandomDateTimeStr:i,getDateTimeFromStr:function(t){var e=Date.parse(t);return isNaN(e)?new Date:e},getWeeklyDateTimeStr:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Z",a=r(t),o=n(),u=new Date(a.year,a.month,a.day,o.hours,o.minutes,o.seconds),i=[],s=0;s<7;s++)i.push(m(u,h)+e),u=d(u,-1,"day");return i}}});