ExchangeApp.modules.Footer=function(){function a(){var a=t();a.$holder=$("#footer"),a.random=i.rand(),function(a,n){var e=t(),r=a||e.$html,o=n||e.random;r=i.randomize(r,o,!1)}(),function(a,e){var r=t();r.ajaxMap||(r.ajaxMap={});var o=a||r.$html,u=e||r.random,l=i.findAjaxUrls(o,u);$.each(l,function(a,t){r.ajaxMap[n(t,{params:!0})]=t}),i.find(o,u,'[data-ajax-load="true"]').on("click",function(){var a=$(this).attr("data-ajax-url-tmpl"),t=$(this).attr("data-ajax-url-vars"),n=$(this).attr("data-ajax-url-params"),e=i.getUrl(a,t,n);return d.route(e),!1}),i.find(o,u,'[data-ajax-anchor="true"]').on("click",function(){var a=$($(this).attr("href"));return a.length&&$("html, body").animate({scrollTop:a.offset().top},200),!1})}()}function t(){return e[n(r,{params:!0})]}function n(a,t){return i.stringifyUrl(a,t)}var e={},r={template:"footer"},o={reloadNeeded:!1},d=ExchangeApp.routers.ModuleRouter,i=ExchangeApp.utils.module,u=ExchangeApp.loaders.FragmentLoader.init("footer");return{init:function(n){r=n,this.loadFragment({onFragmentLoaded:function(){o.reloadNeeded=!1,a()},onResourcesLoaded:function(){var a=t();a.widgets={},this.setEvents(),a.inited=!0,this.render()}})},update:function(a){r=a},getFragment:function(a){return e[n(a,{params:!0})]},isFragmentInited:function(a){var t=this.getFragment(a);return t&&t.inited},loadFragment:function(a){var t=this;u.load({url:r,callbacks:{onFragmentLoaded:function(o){var d=$(o).find("#footer .markup-frg"),u=n(r,{params:!0});e[u]={$html:d,url:i.clone(r)},a.onFragmentLoaded.apply(t)},onResourcesLoaded:function(){a.onResourcesLoaded.apply(t)}}})},render:function(){var a=t();a&&a.$holder&&a.$holder.append(a.$html)},hide:function(){var a=t();a&&a.$holder.hide()},show:function(){var a=t();a&&a.$holder&&a.$holder.show()},setEvents:function(){},reloadNeeded:function(){return o.reloadNeeded}}}();