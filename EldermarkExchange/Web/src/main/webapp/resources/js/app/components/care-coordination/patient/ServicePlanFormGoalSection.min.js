ServicePlanForm.NeedSection.GoalSection=function(){function t(){Widget.apply(this,arguments),this.state={data:this.props.data}}return t.prototype=Object.create(Widget.prototype),t.prototype.constructor=t,t.prototype.getDefaultProps=function(){return{index:0,data:{}}},t.prototype.onChange=function(t){var e=$(t.target),a=e.val(),o=e.attr("data-name");"date"===(e.attr("data-type")||e.attr("type"))&&(a=t.date?t.date.toDate().getTime():"");var n=$.extend({},this.state.data);n[o]=a,this.setState({data:n})},t.prototype.onRemove=function(){var t=this.props.onRemove,e=this.props.index;if(this.isNotEmpty()){var a=this;!function(t,e,a){bootbox.confirm({message:t,buttons:{cancel:{label:"Cancel"},confirm:{label:"Ok"}},callback:function(t){t?e&&e():a&&a()}})}("Goal with the corresponding  fields will be deleted",function(){t&&t(e),a.unmount()})}else t&&t(e),this.unmount()},t.prototype.componentDidMount=function(){this.$element=$('[cmp-id="'+this.$$id+'"]'),this.dom=this.$element.get(0);var t=this;this.$element.find('input[data-type="date"]').datetimepicker({format:"MM/DD/YYYY HH:mm A ["+(new Date).getTimezoneAbbr()+"]"}).on("dp.change",function(e){t.onChange(e)}),this.$element.find('input[data-name="progress"]').on("input",function(){var t=$(this).val();""!==t&&(t=+t,_.isNaN(t)?t="":t>100&&(t=100),$(this).prop("value",t))});var e=this.props.isReadonly;this.$element.find("input, select, textarea").each(function(){var t=$(this);t.attr("name");e&&t.attr("disabled","true"),t.is('textarea[data-autoresizable="true"]')&&t.autoresize()}),this.addOnChangeHandler(function(e){t.onChange(e)})},t.prototype.componentDidUpdate=function(t){var e=this.props.index,a=t.index;e!=a&&(this.$element.find(".section__header h5").text("Goal #"+(e+1)),this.$element.find("input, textarea").each(function(){var t=$(this),a=t.attr("name"),o="goal."+e;t.attr("name",a.replace(/goal\.\d+/,o))}))},t.prototype.addOnChangeHandler=function(t){this.$element.on("change",t)},t.prototype.getNeedIndex=function(){return this.props.needIndex},t.prototype.getIndex=function(){return this.props.index},t.prototype.getData=function(){return $.extend({},this.state.data)},t.prototype.isNotEmpty=function(){var t=!1,e=this.getData();return $.each(e,function(e,a){(function(t){return!t||0===Object.keys(t).length})(a)||(t=!0)}),t},t.prototype.isChanged=function(){var t=this;return _.any(this.state.data,function(e,a){return e!==t.props.data[a]})},t.prototype.render=function(){var t=this,e=this.props.index,a=this.props.needIndex,o=this.props.isReadonly,n=this.state.data;return{"<>":"div",class:"form-section goal-section",html:[{"<>":"div",class:"section__header goal-section__header",html:[{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-6",html:[{"<>":"h5",text:"Goal #"+(e+1)}]},{"<>":"div",class:"col-md-6",html:[o?void 0:{"<>":"a",class:"add-button pull-right",html:[{"<>":"span",text:"Remove"}],onclick:function(){t.onRemove()}}]}]}]},{"<>":"div",class:"goal-section__body",html:[{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-12",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",for:"createdDate",text:"Goal*"},{"<>":"textarea",rows:1,name:"need."+a+".goal."+e+".goal","data-name":"goal","data-autoresizable":!0,"data-goal-field":!0,class:"form-control autoresizable",text:n.goal||""}]}]}]},{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-12",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",for:"createdDate",text:"Barriers"},{"<>":"textarea",rows:4,name:"need."+a+".goal."+e+".barriers","data-name":"barriers","data-autoresizable":!0,"data-goal-field":!0,style:"min-height: 82px",class:"form-control autoresizable",text:n.barriers||""}]}]}]},{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-12",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",for:"createdDate",text:"Intervention / Action"},{"<>":"textarea",rows:4,name:"need."+a+".goal."+e+".interventionAction","data-name":"interventionAction","data-autoresizable":!0,"data-goal-field":!0,style:"min-height: 82px",class:"form-control autoresizable",text:n.interventionAction||""}]}]}]},{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-12",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",text:"Resource Name"},{"<>":"textarea",rows:1,name:"need."+a+".goal."+e+".resourceName","data-name":"resourceName","data-autoresizable":!0,"data-goal-field":!0,class:"form-control autoresizable",text:n.resourceName||""}]}]}]},{"<>":"div",class:"row",html:[{"<>":"div",class:"col-md-4",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",text:"Target Completion Date*"},{"<>":"input",name:"need."+a+".goal."+e+".targetCompletionDate","data-name":"targetCompletionDate",type:"text","data-type":"date","data-goal-field":!0,class:"form-control",placeholder:"mm/dd/yyyy hh:mm",value:n.targetCompletionDate&&new Date(n.targetCompletionDate).format("mm/dd/yyyy HH:MM TT")+" "+(new Date).getTimezoneAbbr()}]}]},{"<>":"div",class:"col-md-4",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",text:"Completion Date"},{"<>":"input",name:"need."+a+".goal."+e+".completionDate","data-name":"completionDate",type:"text","data-type":"date","data-goal-field":!0,class:"form-control",placeholder:o?"":"mm/dd/yyyy hh:mm",value:n.completionDate&&new Date(n.completionDate).format("mm/dd/yyyy HH:MM TT")+" "+(new Date).getTimezoneAbbr()}]}]},{"<>":"div",class:"col-md-4",html:[{"<>":"div",class:"form-group",html:[{"<>":"label",text:"Goal completion, %"},{"<>":"input",name:"need."+a+".goal."+e+".progress","data-name":"progress","data-goal-field":!0,type:"text",class:"form-control",value:n.progress||""}]}]}]}]}]}},t}($);